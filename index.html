<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <title>κΉ¨μ›μ£Όμ„Έμ”</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- ==========================
     λ‚΄λ¶€ λ¨λ‹¬ (Custom Modal)
========================== -->
    <div id="appModal" class="modal-overlay">
      <div class="modal-box">
        <div class="modal-message" id="modalMessage">
          <!-- JSλ΅ λ©”μ‹μ§€ λ“¤μ–΄κ° -->
        </div>
        <button id="modalCloseBtn" class="modal-close-btn">ν™•μΈ</button>
      </div>
    </div>

    <div class="app-shell">
      <div class="phone-frame">
        <header class="app-header">
          <div class="app-header__title">κΉ¨μ›μ£Όμ„Έμ”</div>
          <div class="app-header__subtitle">μ΅Έμ•„λ„ κ΄μ°®μ€ ν•μ°¨ μ•λ¦Ό μ„λΉ„μ¤</div>
          <button
            class="mypage-btn"
            onclick="goToMyPage()"
            style="display: none"
          >
            My Page
          </button>
        </header>

        <main class="app-main">
          <section id="initScreen" class="screen screen--active">
            <div class="page-box page-box--init">
              <div class="init-header">μ‹ λ¶„μ¦ μΈμ¦</div>

              <div class="camera-box">
                <video id="cameraStream" autoplay playsinline></video>
              </div>

              <div class="scan-text">μ‹ λ¶„μ¦μ„ ν™”λ©΄ μ¤‘μ•™μ— λ§μ¶°μ£Όμ„Έμ”</div>

              <!-- β… μ°μΈ΅ ν•λ‹¨ ν™”μ‚΄ν‘ FAB λ²„νΌ -->
              <button
                class="scan-fab"
                id="scanBtn"
                aria-label="μ‹ λ¶„μ¦ μ¤μΊ” μ§„ν–‰"
              >
                <span class="scan-fab__icon">β¤</span>
              </button>
            </div>
          </section>

          <!-- π  ν™ ν™”λ©΄ -->
          <section id="homeScreen" class="screen screen--fade">
            <div class="page-box page-box--home">
              <div class="logo-wrapper">
                <img
                  src="sleeping-square-svgrepo-com.svg"
                  alt="μ μλ” μ•„μ΄μ½"
                  class="logo-icon"
                />
              </div>
              <h1 class="home-title">ν•μ°¨ κ±±μ • μ—†λ” μ¶ν‡΄κ·Ό</h1>
              <p class="home-subtitle">
                κ°™μ€ μΉΈμ— νƒ€κ³  μλ” μ‚¬λκ³Ό<br />
                μ•± μ•λ¦Όμ„ ν•¨κ» μ‚¬μ©ν•λ” μ•μ „ν• ν•μ°¨ λ„μ°λ―Έ
              </p>

              <button class="btn btn-primary btn-large" onclick="goToRequest()">
                ν•μ°¨ μ”μ²­ν•κΈ°
              </button>

              <button
                class="btn btn-outline"
                onclick="showScreen('helperListScreen')"
              >
                λ„μ™€μ£ΌκΈ° (Helper λ¨λ“)
              </button>

              <button
                class="btn btn-secondary"
                onclick="showScreen('alarmSettingsScreen')"
              >
                ν•μ°¨ μ•λ¦Ό μ„¤μ •
              </button>

              <button class="text-link" onclick="openAbout()">
                μ„λΉ„μ¤ μ†κ° λ³΄κΈ°
              </button>
            </div>
          </section>

          <!-- β° ν•μ°¨ μ•λ¦Ό μ„¤μ • ν™”λ©΄ -->
          <section id="alarmSettingsScreen" class="screen">
            <div class="page-box">
              <div class="page-header">
                <button class="icon-btn" onclick="showScreen('homeScreen')">
                  β†
                </button>
                <h2>ν•μ°¨ μ•λ¦Ό μ„¤μ •</h2>
              </div>

              <p class="subtitle">
                μ•λ¦Ό λ°©μ‹μ„ λ―Έλ¦¬ μ„¤μ •ν•΄λ‘λ©΄<br />
                λ‹¤λ¥Έ μ•±μ„ μ‚¬μ© μ¤‘μΌ λ•λ„ μ•μ „ν•κ² ν•μ°¨ μ•λ¦Όμ„ λ°›μ„ μ μμµλ‹λ‹¤.
              </p>

              <div class="toggle-row">
                <span>μ§„λ™ μ•λ¦Ό</span>
                <label class="switch">
                  <input id="vibrateToggle" type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>

              <div class="toggle-row">
                <span>μ†λ¦¬ μ•λ¦Ό</span>
                <label class="switch">
                  <input id="soundToggle" type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>

              <div class="toggle-row">
                <span>κ°•ν• μ•λ¦Ό λ¨λ“ (μ—°μ† μ§„λ™ Β· νμ—…)</span>
                <label class="switch">
                  <input id="strongToggle" type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>

              <button class="btn btn-primary" onclick="saveAlarmSettings()">
                μ„¤μ • μ €μ¥
              </button>

              <button class="btn btn-outline" onclick="testAlarmPreview()">
                μ•λ¦Ό λ―Έλ¦¬λ³΄κΈ°
              </button>
            </div>
          </section>

          <!-- π™‹ ν•μ°¨ μ”μ²­ ν™”λ©΄ -->
          <section id="requestScreen" class="screen">
            <div class="page-box">
              <div class="page-header">
                <button class="icon-btn" onclick="showScreen('homeScreen')">
                  β†
                </button>
                <h2>ν•μ°¨ μ”μ²­ν•κΈ°</h2>
              </div>

              <label class="field-label">ν•μ°¨μ—­</label>
              <input
                type="text"
                id="stationInput"
                placeholder="μ: κ°•λ‚¨μ—­, ν™λ€μ…κµ¬μ—­"
              />

              <p class="info-text">
                ν•μ°¨ μ•λ¦Ό(μ†λ¦¬/μ§„λ™)μ€<br />
                [ν•μ°¨ μ•λ¦Ό μ„¤μ •]μ—μ„ λ―Έλ¦¬ μ΅°μ •ν•  μ μμµλ‹λ‹¤.
              </p>

              <button
                class="btn btn-outline"
                onclick="showScreen('filterScreen')"
              >
                ν•„ν„° μ„¤μ • (μ„±λ³„ Β· λ³„μ  Β· κ±°λ¦¬)
              </button>

              <button class="btn btn-primary" onclick="sendRequest()">
                μ΄ μ„¤μ •μΌλ΅ λ„μ›€ μ”μ²­ λ³΄λ‚΄κΈ°
              </button>
            </div>
          </section>

          <!-- π› ν•„ν„° μ„¤μ • ν™”λ©΄ -->
          <section id="filterScreen" class="screen">
            <div class="page-box">
              <div class="page-header">
                <button class="icon-btn" onclick="showScreen('requestScreen')">
                  β†
                </button>
                <h2>ν•„ν„° μ„¤μ •</h2>
              </div>

              <label class="field-label">μ„±λ³„</label>
              <select id="genderFilter">
                <option value="all">λ¨λ‘</option>
                <option value="male">λ‚¨μ„±λ§</option>
                <option value="female">μ—¬μ„±λ§</option>
              </select>

              <label class="field-label">μµμ† λ³„μ </label>
              <input
                type="number"
                id="ratingFilter"
                min="0"
                max="5"
                step="0.5"
                value="0"
              />

              <label class="field-label">κ±°λ¦¬ (m)</label>
              <select id="distanceFilter">
                <option value="10">10m</option>
                <option value="20">20m</option>
                <option value="30">30m</option>
                <option value="40">40m</option>
                <option value="50">50m</option>
              </select>

              <button class="btn btn-primary" onclick="applyFilter()">
                ν•„ν„° μ μ©ν•κΈ°
              </button>
              <button
                class="btn btn-secondary"
                onclick="showScreen('requestScreen')"
              >
                μ·¨μ†ν•κ³  λμ•„κ°€κΈ°
              </button>
            </div>
          </section>

          <!-- π¨ μ”μ²­μ: λ€κΈ° + QR μ μ‹ ν™”λ©΄ -->
          <section id="qrShowScreen" class="screen">
            <div class="page-box">
              <div class="page-header">
                <button class="icon-btn" onclick="showScreen('homeScreen')">
                  β†
                </button>
                <h2>λ„μ›€ μ”μ²­ μ™„λ£</h2>
              </div>

              <p class="subtitle">
                κ·Όμ²μ— μ΅°κ±΄μ— λ§λ” ν—¬νΌκ°€ μλ‹¤λ©΄<br />
                μ—°κ²° μ•λ¦Όμ΄ λ„μ°©ν•©λ‹λ‹¤.<br /><br />
                μ‹¤μ  ν•μ°¨μ—­μ— λ„μ°©ν–μ„ λ•,<br />
                κΉ¨μ›μ¤€ λ¶„μ—κ² μ•„λ QRμ„ λ³΄μ—¬μ£Όμ„Έμ”.
              </p>

              <div class="qr-box">
                <div class="qr-inner">QR</div>
              </div>

              <button
                class="btn btn-secondary"
                onclick="showScreen('idScreen')"
              >
                QRμ΄ μΈμ‹ μ• λλ‚μ”? IDλ΅ ν¬μΈνΈ μ§€κΈ‰
              </button>
              <!-- μ”μ²­μμ© QR μ¤μΊ” μ™„λ£ μ‹λ®¬λ μ΄μ… λ²„νΌ -->
              <button
                class="fab-debug"
                onclick="simulateRequesterScan()"
                aria-label="QR μ¤μΊ” μ™„λ£"
              >
                β–·
              </button>
            </div>
          </section>

          <!-- π§Ύ ID μ…λ ¥ ν™”λ©΄ (μ”μ²­μ β†’ ν—¬νΌμ—κ² ν¬μΈνΈ) -->
          <section id="idScreen" class="screen">
            <div class="page-box">
              <div class="page-header">
                <button class="icon-btn" onclick="showScreen('qrShowScreen')">
                  β†
                </button>
                <h2>IDλ΅ ν¬μΈνΈ μ§€κΈ‰</h2>
              </div>

              <p class="subtitle">
                QRμ΄ μ λ€λ΅ μΈμ‹λμ§€ μ•μ„ κ²½μ°,<br />
                λ„μ™€μ¤€ λ¶„μ IDλ¥Ό μ…λ ¥ν•΄ ν¬μΈνΈλ¥Ό μ§€κΈ‰ν•  μ μμµλ‹λ‹¤.
              </p>

              <input
                type="text"
                id="idInput"
                placeholder="μƒλ€ IDλ¥Ό μ…λ ¥ν•μ„Έμ”"
              />

              <button class="btn btn-primary" onclick="givePointsByID()">
                ν¬μΈνΈ μ§€κΈ‰
              </button>
            </div>
          </section>

          <!-- π”µ ν—¬νΌ: μ”μ²­ λ©λ΅ ν™”λ©΄ -->
          <section id="helperListScreen" class="screen">
            <div class="page-box">
              <div class="page-header">
                <button class="icon-btn" onclick="showScreen('homeScreen')">
                  β†
                </button>
                <h2>λ„μ™€μ£ΌκΈ° (Helper λ¨λ“)</h2>
              </div>

              <p class="subtitle">
                κ·Όμ²μ—μ„ ν•μ°¨ λ„μ›€μ„ μ”μ²­ν• μΉκ° λ©λ΅μ…λ‹λ‹¤.<br />
                ν•λ‚μ μ”μ²­μ€ ν• λ…μ ν—¬νΌλ§ μ„ μ°©μμΌλ΅ μλ½ν•  μ μμµλ‹λ‹¤.
              </p>

              <div id="helperRequests">
                <div class="helper-card" data-id="req1">
                  <div class="helper-card__header">
                    <div>
                      <div class="helper-station">κ°•λ‚¨μ—­ ν•μ°¨</div>
                      <div class="helper-meta">2μ •κ±°μ¥ λ‚¨μ Β· μ•½ 30m κ±°λ¦¬</div>
                    </div>
                    <div class="badge badge--female">μ—¬μ„±</div>
                  </div>
                  <div class="helper-card__body">
                    <div class="helper-rating">μ”μ²­μ ν‰μ  β…4.8</div>
                    <div class="helper-note">κ°™μ€ μΉΈ Β· μµμ† λ³„μ  4.0 μ΄μƒ</div>
                  </div>
                  <button
                    class="btn btn-primary btn-small"
                    onclick="acceptRequest('req1')"
                  >
                    μλ½ν•κΈ°
                  </button>
                </div>

                <div class="helper-card" data-id="req2">
                  <div class="helper-card__header">
                    <div>
                      <div class="helper-station">μ μ‹¤μ—­ ν•μ°¨</div>
                      <div class="helper-meta">3μ •κ±°μ¥ λ‚¨μ Β· μ•½ 60m κ±°λ¦¬</div>
                    </div>
                    <div class="badge badge--all">μ„±λ³„ μ ν• μ—†μ</div>
                  </div>
                  <div class="helper-card__body">
                    <div class="helper-rating">μ”μ²­μ ν‰μ  β…4.2</div>
                    <div class="helper-note">
                      κ°™μ€ μ—΄μ°¨ Β· μµμ† λ³„μ  3.5 μ΄μƒ
                    </div>
                  </div>
                  <button
                    class="btn btn-primary btn-small"
                    onclick="acceptRequest('req2')"
                  >
                    μλ½ν•κΈ°
                  </button>
                </div>

                <div class="helper-card" data-id="req3">
                  <div class="helper-card__header">
                    <div>
                      <div class="helper-station">μ„μΈμ—­ ν•μ°¨</div>
                      <div class="helper-meta">1μ •κ±°μ¥ λ‚¨μ Β· μ•½ 20m κ±°λ¦¬</div>
                    </div>
                    <div class="badge badge--male">λ‚¨μ„±</div>
                  </div>
                  <div class="helper-card__body">
                    <div class="helper-rating">μ”μ²­μ ν‰μ  β…4.9</div>
                    <div class="helper-note">κ°™μ€ μΉΈ Β· μµμ† λ³„μ  4.5 μ΄μƒ</div>
                  </div>
                  <button
                    class="btn btn-primary btn-small"
                    onclick="acceptRequest('req3')"
                  >
                    μλ½ν•κΈ°
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- π”µ ν—¬νΌ: μ§„ν–‰ μ¤‘ ν™”λ©΄ -->
          <section id="helperActiveScreen" class="screen">
            <div class="page-box">
              <div class="page-header">
                <button class="icon-btn" onclick="cancelActiveHelp()">β†</button>
                <h2>λ„μ›€ μ£Όλ” μ¤‘</h2>
              </div>

              <div class="active-summary">
                <div class="active-station" id="activeStation">κ°•λ‚¨μ—­ ν•μ°¨</div>
                <div class="active-meta" id="activeMeta">
                  2μ •κ±°μ¥ λ‚¨μ Β· μ•½ 30m κ±°λ¦¬
                </div>
              </div>

              <div class="progress-wrap">
                <div class="progress-label">
                  λ‚¨μ€ μ •κ±°μ¥: <span id="activeRemain">2</span>
                </div>
                <div class="progress-track">
                  <div class="progress-bar" id="activeProgress"></div>
                </div>
              </div>

              <div class="active-tip">
                μ‹¤μ  μ„λΉ„μ¤μ—μ„λ” μ—΄μ°¨ μ„μΉμ™€ μ—­ μ •λ³΄λ¥Ό κΈ°λ°μΌλ΅<br />
                λ‚¨μ€ μ •κ±°μ¥μ΄ μλ™μΌλ΅ μ—…λ°μ΄νΈλ©λ‹λ‹¤.
              </div>

              <p class="info-text">
                ν•μ°¨μ—­μ— λ„μ°©ν•λ©΄ μΉκ°μ„ κΉ¨μ›μ¤€ λ’¤<br />
                μ•„λ λ²„νΌμ„ λλ¬ ν¬μΈνΈλ¥Ό λ°›μΌμ„Έμ”.
              </p>

              <button class="btn btn-primary" onclick="goToQRFromHelper()">
                κΉ¨μ›μ£Όκ³  ν¬μΈνΈ λ°›κΈ°
              </button>

              <!-- μ •κ±°μ¥ μ΄λ™ μ‹λ®¬λ μ΄μ…μ©: μ°ν•λ‹¨ μ‘μ€ λ²„νΌ -->
              <button
                class="fab-debug"
                onclick="decreaseRemain()"
                aria-label="μ •κ±°μ¥ 1κ° μ§€λ‚¨"
              >
                β–·
              </button>
            </div>
          </section>

          <!-- π”µ ν—¬νΌ: QR μ¤μΊ” ν™”λ©΄ -->
          <section id="qrScanScreen" class="screen">
            <div class="page-box">
              <div class="page-header">
                <button
                  class="icon-btn"
                  onclick="showScreen('helperActiveScreen')"
                >
                  β†
                </button>
                <h2>QR μ¤μΊ”</h2>
              </div>

              <p class="subtitle">
                μ”μ²­μκ°€ λ³΄μ—¬μ£Όλ” QRμ„ μ΄ μ•μ— λ§μ¶°μ£Όμ„Έμ”.<br />
                μΈμ‹λλ©΄ ν¬μΈνΈκ°€ μλ™μΌλ΅ μ λ¦½λ©λ‹λ‹¤.
              </p>

              <div id="cameraBox" class="camera-box">μΉ΄λ©”λΌ μ¤€λΉ„ μ¤‘</div>

              <!-- μ¤μΊ” μ‹λ®¬λ μ΄μ…μ©: μ°ν•λ‹¨ μ‘μ€ λ²„νΌ -->
              <button
                class="fab-debug"
                onclick="simulateScan()"
                aria-label="QR μ¤μΊ”"
              >
                β–·
              </button>
            </div>
          </section>

          <!-- π‰ ν¬μΈνΈ μ§€κΈ‰ μ™„λ£ ν™”λ©΄ (κ³µν†µ) -->
          <section id="doneScreen" class="screen">
            <div class="page-box">
              <div class="page-header">
                <h2>ν¬μΈνΈ μ§€κΈ‰ μ™„λ£</h2>
              </div>

              <p class="subtitle">
                λ„μ™€μ£Όμ‹  λ•λ¶„μ— μ•μ „ν•κ² ν•μ°¨ν•  μ μμ—μµλ‹λ‹¤.<br />
                ν¬μΈνΈκ°€ μ λ¦½λμ—μµλ‹λ‹¤.
              </p>

              <button
                class="btn btn-primary"
                onclick="showScreen('homeScreen')"
              >
                ν™μΌλ΅ λμ•„κ°€κΈ°
              </button>
            </div>
          </section>
          <!-- β… μƒλ΅ μ •λ¦¬ν•: λ§μ΄νμ΄μ§€ (λ‚΄ μ •λ³΄ ν™”λ©΄) -->
          <section id="myPageScreen" class="screen">
            <div class="page-box mypage-box">
              <div class="page-header">
                <button class="icon-btn" onclick="showScreen('homeScreen')">
                  β†
                </button>
                <h2>λ‚΄ μ •λ³΄</h2>
              </div>

              <!-- ν”„λ΅ν•„ μμ—­ -->
              <div class="mypage-profile">
                <div class="mypage-avatar">π™‚</div>
                <div class="mypage-profile-text">
                  <div class="mypage-name" id="mypageName">ν™κΈΈλ™</div>
                  <div class="mypage-id" id="mypageId">@user123</div>
                  <div class="mypage-stats" id="mypageStats">
                    λ„μ›€ λ°›μ€ 0ν Β· λ„μ™€μ¤€ 0ν
                  </div>
                </div>
              </div>

              <!-- ν¬μΈνΈ μ”μ•½ μΉ΄λ“ -->
              <div class="mypage-card">
                <div class="mypage-card-header">
                  <span>λ‚μ ν¬μΈνΈ</span>
                  <span class="mypage-point-label">λ³΄μ  ν¬μΈνΈ</span>
                </div>
                <div class="mypage-point-value" id="mypagePointValue">0 P</div>
                <div class="mypage-point-actions">
                  <button
                    class="btn btn-outline btn-small"
                    onclick="showToast('ν¬μΈνΈ μ λ¦½ λ‚΄μ—­μ€ μ•„μ§ λ°λ¨ μƒνƒμ…λ‹λ‹¤.')"
                  >
                    μ λ¦½ λ‚΄μ—­
                  </button>
                  <button
                    class="btn btn-outline btn-small"
                    onclick="showToast('ν¬μΈνΈ μ‚¬μ© λ‚΄μ—­μ€ μ•„μ§ λ°λ¨ μƒνƒμ…λ‹λ‹¤.')"
                  >
                    μ‚¬μ© λ‚΄μ—­
                  </button>
                </div>
                <button class="btn btn-secondary" onclick="openCashoutModal()">
                  ν¬μΈνΈ ν„κΈν™” ν•κΈ°
                </button>
              </div>

              <!-- ν™λ™ / λ³„μ  μΉ΄λ“ -->
              <div class="mypage-card">
                <div class="mypage-card-header">
                  <span>λ‚μ ν™λ™</span>
                </div>
                <p class="mypage-small" id="mypageActivity">
                  λ„μ›€ λ°›μ€ 3ν Β· λ„μ™€μ¤€ 12ν
                </p>
                <p class="mypage-small">
                  λ‚μ λ³„μ  <span id="mypageRating">β… 4.8</span>
                </p>
              </div>

              <!-- μµκ·Ό ν›„κΈ° μΉ΄λ“ -->
              <div class="mypage-card">
                <div class="mypage-card-header">
                  <span>μµκ·Ό ν›„κΈ°</span>
                </div>
                <ul class="mypage-review-list" id="mypageReviewList">
                  <!-- JSλ΅ μ±„μ›μ§ -->
                </ul>
              </div>

              <!-- μƒμ μΌλ΅ μ΄λ™ λ²„νΌ -->
              <button class="btn btn-primary" onclick="goToShop()">
                μƒμ μΌλ΅ μ΄λ™
              </button>
            </div>
          </section>

          <!-- β… μƒλ΅ μ¶”κ°€: μƒμ  ν™”λ©΄ -->
          <section id="shopScreen" class="screen">
            <div class="page-box shop-box">
              <div class="page-header">
                <button class="icon-btn" onclick="showScreen('myPageScreen')">
                  β†
                </button>
                <h2>μƒμ </h2>
              </div>

              <!-- ν¬μΈνΈ μ”μ•½ -->
              <div class="shop-summary">
                <div class="shop-point-label">λ³΄μ  ν¬μΈνΈ</div>
                <div class="shop-point-value" id="shopPointValue">0 P</div>
              </div>

              <!-- μƒν’ κ·Έλ¦¬λ“ -->
              <div class="shop-grid" id="shopGrid">
                <!-- JSμ—μ„ μƒν’ μΉ΄λ“ μ±„μ›€ -->
              </div>

              <p class="shop-note">
                μΌλ¶€ μƒν’μ€ κΈ°ν”„ν‹°μ½ λλ” μΏ ν° ν•νƒλ΅ μ κ³µλ©λ‹λ‹¤.<br />
                μ‹¤μ  μ„λΉ„μ¤μ—μ„λ” κµν™ ν›„ μΏ ν°ν•¨μ—μ„ ν™•μΈν•  μ μμ–΄μ”.
              </p>
            </div>
          </section>
        </main>

        <!-- π“± ν•λ‹¨ λ„¤λΉ„κ²μ΄μ… (μ‚Όμ„± λλ‚) -->
        <div class="android-nav">
          <div class="nav-btn nav-back"></div>
          <div class="nav-btn nav-home"></div>
          <div class="nav-btn nav-recent"></div>
        </div>

        <!-- π”” μΈμ•± ν† μ¤νΈ -->
        <div id="toast" class="toast"></div>

        <!-- π§ μΈμ•± λ¨λ‹¬ -->
        <div id="modalOverlay" class="modal-overlay">
          <div class="modal-card">
            <div id="modalMessage" class="modal-message"></div>
            <button class="btn btn-primary btn-modal" onclick="closeModal()">
              ν™•μΈ
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
